---
layout: default
title: "404: Page not found"
permalink: 404.html
noindex: true
exclude_from_nav: true
---
<div id="message">
  <p>Trying to find the closest matchâ€¦</p>
</div>
  <script>
    // -----------------------------
    // 1. URL list generated by Jekyll
    // -----------------------------
    const siteUrls = [
      {% for page in site.pages %}
        {% if page.url != "/404.html" %}
          "{{ page.url | relative_url }}",
        {% endif %}
      {% endfor %}
      {% for post in site.posts %}
        "{{ post.url | relative_url }}",
      {% endfor %}
    ];

    // Normalize URLs
    function normalize(path) {
      return decodeURIComponent(path)
        .toLowerCase()
        .replace(/\/+$/, "")
        || "/";
    }

    const currentPath = normalize(
      location.pathname.replace("{{ site.baseurl }}", "")
    );

    // -----------------------------
    // 2. Levenshtein distance
    // -----------------------------
    function levenshtein(a, b) {
      const matrix = [];

      for (let i = 0; i <= b.length; i++) {
        matrix[i] = [i];
      }
      for (let j = 0; j <= a.length; j++) {
        matrix[0][j] = j;
      }

      for (let i = 1; i <= b.length; i++) {
        for (let j = 1; j <= a.length; j++) {
          if (b.charAt(i - 1) === a.charAt(j - 1)) {
            matrix[i][j] = matrix[i - 1][j - 1];
          } else {
            matrix[i][j] = Math.min(
              matrix[i - 1][j - 1] + 1,
              matrix[i][j - 1] + 1,
              matrix[i - 1][j] + 1
            );
          }
        }
      }

      return matrix[b.length][a.length];
    }

    // -----------------------------
    // 3. Find best match
    // -----------------------------
    let bestMatch = null;
    let bestScore = Infinity;

    for (const url of siteUrls) {
      const normalizedUrl = normalize(url);
      const score = levenshtein(currentPath, normalizedUrl);

      if (score < bestScore) {
        bestScore = score;
        bestMatch = url;
      }
    }

    // -----------------------------
    // 4. Redirect or fallback
    // -----------------------------
    const MAX_DISTANCE = Math.max(3, currentPath.length * 0.4);

    if (bestMatch && bestScore <= MAX_DISTANCE) {
      const target = "{{ site.baseurl }}" + bestMatch;
      location.replace(target);
    } else {
      document.getElementById("message").innerHTML += `
        <p>Sorry, we could not find a close match.</p>
        <p><a href="{{ site.baseurl }}/">Go to home page</a></p>
      `;
    }
  </script>